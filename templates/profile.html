{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>My Profile</title>
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
  
</head>
<body>

<div class="top-bar">
    <h1>TickSender</h1>
    <nav>
        <a href="{% url 'home' %}">Home</a>
        <a href="{% url 'profile' %}">Profile</a>
        <a href="{% url 'my_friends' %}">My Friends</a>
        <a href="{% url 'friend_requests' %}">Friend Requests</a>
        <a href="{% url 'logout' %}">Logout</a>
    </nav>
</div>

<div class="page-container">

    <div class="post-box">
        <h2>{{ request.user.full_name }}'s Profile</h2>

        {% if messages %}
        <div class="messages">
            {% for msg in messages %}
                <p>{{ msg }}</p>
            {% endfor %}
        </div>
        {% endif %}

        <div style="text-align:center;">
            <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'default-user.png' %}{% endif %}" alt="Profile Picture" width="150" height="150" style="border-radius: 50%;">
        </div>

        <form method="POST" enctype="multipart/form-data" style="margin-top: 10px;">
            {% csrf_token %}
            <input type="file" name="profile_image">
            <button type="submit">Update Image</button>
        </form>

        <form method="POST" style="margin-top: 10px;">
            {% csrf_token %}
            <textarea name="bio" rows="3" placeholder="Write something about you...">{{ user.bio }}</textarea>
            <button type="submit">Update Bio</button>
        </form>

        <hr>
        <h3>Create a New Post</h3>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <textarea name="text" placeholder="What's on your mind?" rows="3"></textarea><br>
            <input type="file" name="image" accept="image/*"><br>
            <input type="file" name="video" accept="video/*"><br>
            <input type="file" name="audio" accept="audio/*"><br>
            <button type="submit">Post</button>
        </form>
    </div>

    <div class="feed">
        <h3>Your Posts</h3>
        {% for post in posts %}
        <div class="post">
            <div class="post-header">
                <strong>{{ post.user.full_name }}</strong><br>
                <small class="timestamp">{{ post.pretty_time }}</small>
            </div>
            {% if post.text %}
                <p>{{ post.text }}</p>
            {% endif %}
            {% if post.image %}
                <img src="{{ post.image.url }}" alt="Image" class="media">
            {% endif %}
            {% if post.video %}
                <video controls class="media"><source src="{{ post.video.url }}"></video>
            {% endif %}
            {% if post.audio %}
                <audio controls><source src="{{ post.audio.url }}"></audio>
            {% endif %}
        </div>
        {% endfor %}
    </div>

</div>
</body>
</html>
