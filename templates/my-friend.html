{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>My Friends</title>
  <link rel="stylesheet" href="{% static 'css/my-friend.css' %}">

    <script src="https://kit.fontawesome.com/59e7337c41.js" crossorigin="anonymous"></script>
</head>

<style>
  .chat{
    text-decoration: none;
    display: flex;
    margin-right: 20px;
    color: #a915ce;
  }
  .chat:hover{
    color: #cec215;
  }
</style>
<body>
  <header class="top-bar">
    <h1>TickSender</h1>
    <form method="GET" action="{% url 'search_users' %}" class="search-form">
      <input type="text" name="q" placeholder="Search users..." required>
      <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
    </form>
    <nav>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'profile' %}">Profile</a>
      <a href="{% url 'logout' %}">Logout</a>
      <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
        <span id="theme-icon">üåô</span>
      </button>
    </nav>
  </header>
  <div class="container">
    <h2>My Friends</h2>
    {% for friend in friends %}
      <div class="request">
        <div class="request-info">
          <img src="{% if friend.profile_image %}{{ friend.profile_image.url }}{% else %}{% static 'default-user.png' %}{% endif %}" alt="Avatar">
          <span>{{ friend.full_name }}</span>
          <div>
            <a class="chat" href="{% url 'chat' friend.id %}">Chat</a>
          </div>
        </div>
      </div>
    {% empty %}
      <p style="text-align:center;">You have no friends yet. Start connecting!</p>
    {% endfor %}
  </div>
  <script>
    function toggleTheme() {
      const body = document.body;
      const themeIcon = document.getElementById('theme-icon');
      
      if (body.getAttribute('data-theme') === 'dark') {
        body.removeAttribute('data-theme');
        themeIcon.textContent = 'üåô';
        localStorage.setItem('theme', 'light');
      } else {
        body.setAttribute('data-theme', 'dark');
        themeIcon.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'dark');
      }
    }

    // Load saved theme on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme');
      const themeIcon = document.getElementById('theme-icon');
      
      if (savedTheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
        themeIcon.textContent = '‚òÄÔ∏è';
      }
    });
  </script>
</body>
</html>
